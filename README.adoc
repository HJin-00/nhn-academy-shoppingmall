# 🛒 쇼핑몰 프로젝트 (JSP/Servlet 기반)

이 프로젝트는 JSP와 Servlet을 기반으로 개발한 웹 쇼핑몰입니다.  
사용자는 상품을 탐색하고, 장바구니에 담고, 포인트로 결제할 수 있으며, 관리자는 상품과 회원, 주문내역을 관리할 수 있습니다.

---

## 📌 프로젝트 개요

- **개발 기간**: 2025.04.28 ~ 2025.05.02
- **사용 기술**: Java Servlet, JSP, MySQL, JSTL, Apache DBCP2, Lombok
- **WAS**: Apache Tomcat 10
- **IDE**: IntelliJ IDEA

---

## 🧩 핵심 기능

### 👥 회원 기능

- 회원가입 시 1,000,000 포인트 기본 지급
- 로그인 상태 유지 시간: 60분 (Session 기반)
- 포인트로 결제 가능 (부족 시 결제 불가)
- 주소 정보 다중 등록 및 관리 가능

---

### 🛒 쇼핑 기능

- 상품 이미지 등록 및 미등록 시 no-image 대체
- 최근 본 상품 5개 쿠키 기반으로 index 페이지 노출
- 상품 상세 페이지 구현
- 상품 카테고리별 검색 및 일반 검색 기능 (구현 예정)

---

### 🧺 장바구니

- DB 기반 장바구니 관리 
- 수량 변경 가능
- 주문 완료 시 장바구니에서 삭제

---

### 💳 주문 및 결제

- 주문 시 포인트로 결제 가능
- 포인트 부족, 재고 부족 예외 처리
- 결제 금액의 10% 포인트 적립 (별도 Thread 처리)
- 주문/결제 로직은 트랜잭션 처리
  - 실패 시 Rollback

---

### 📈 마이페이지

- 포인트 적립/사용 내역 페이징 조회
- 회원 정보 및 주소 수정 가능
- 주문 내역 조회 (구현 예정) 

---

### 🔧 관리자 기능

- 상품 등록, 수정, 삭제
- 카테고리 등록, 수정, 삭제
- 주문 목록 관리

---

## ⚙ 기술 세부사항

### ✅ DB 연결 관리

- DBCP2 커넥션 풀 사용
  - 설정: `initialSize=5`, `maxTotal=5`, `minIdle=5`, `maxIdle=5`
- Connection은 `DbConnectionThreadLocal`로 관리

### ✅ 트랜잭션 처리

- 주문 시 수량 감소, 포인트 차감, 주문 기록 저장 등을 하나의 트랜잭션으로 처리
- AutoCommit 비활성화 + 명시적 commit/rollback

### ✅ 포인트 적립

- 주문 완료 후 별도 Thread에서 10% 적립
- 적립 실패 시 error 로그 기록

### ✅ 페이징

- 모든 목록 조회는 `Page<T>` 클래스 기반 페이징 처리
  - `totalCount`, `content` 기반 페이지 구성

---

## 🧪 테스트

- Repository, Service 단위 테스트 작성
- Mockito 기반 Service 계층 테스트



